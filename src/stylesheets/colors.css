:root {
  --panel-color: rgb(40, 44, 52);
  --card-color: rgb(33, 37, 43);
  --header-color: rgb(58, 64, 75);
  --card-border: rgb(58, 64, 75);
  --card-text: rgb(171, 178, 191);
  --inverse-card-text: rgb(40, 44, 52);
  --holding-tank-item: rgb(33, 37, 43);
  --highlight-color: rgb(145, 183, 216);
  --highlight-color-rgb: 145, 183, 216;
  --context-menu-list: rgb(33, 37, 43);
  --input-background: white;
  --input-border: #ced4da;
  --input-text: rgb(36, 36, 36);
}

/* Light theme (default) */
.theme-light {
  --panel-color: rgb(248, 249, 250);
  --card-color: rgb(255, 255, 255);
  --header-color: rgb(233, 236, 239);
  --card-border: rgb(222, 226, 230);
  --card-text: rgb(33, 37, 41);
  --inverse-card-text: rgb(255, 255, 255);
  --holding-tank-item: rgb(255, 255, 255);
  --highlight-color: rgb(0, 123, 255);
  --highlight-color-rgb: 0, 123, 255;
  --context-menu-list: rgb(255, 255, 255);
  --input-background: white;
  --input-border: #ced4da;
  --input-text: rgb(33, 37, 41);
}

/* Dark theme */
.theme-dark {
  --panel-color: rgb(30, 30, 30);
  --card-color: rgb(40, 44, 52);
  --header-color: rgb(45, 45, 45);
  --card-border: #505050;
  --card-text: rgb(226, 226, 226);
  --inverse-card-text: black;
  --holding-tank-item: rgb(50, 50, 50);
  --highlight-color: rgb(79, 80, 81);
  --highlight-color-rgb: 79, 80, 81;
  --context-menu-list: rgb(30, 30, 30);
  --input-background: rgb(45, 45, 45);
  --input-border: #505050;
  --input-text: rgb(226, 226, 226);
}

/* Light mode playlist styling */
.holding-tank-playlist-mode {
  background-color: #e8f5e8 !important;
  border-left-color: #28a745 !important;
}

/* Dark theme specific overrides (for backward compatibility) */
@media (prefers-color-scheme: dark) {
  .theme-auto {
    --highlight-color: rgb(79, 80, 81);
    --header-color: rgb(45, 45, 45);
    --panel-color: rgb(30, 30, 30);
    --card-border: #505050;
    --card-text: rgb(226, 226, 226);
    --inverse-card-text: black;
    --autoplay: rgb(83, 164, 81);
    --holding-tank-item: rgb(50, 50, 50);
    --context-menu-list: rgb(30, 30, 30);
    --input-background: rgb(45, 45, 45);
    --input-border: #505050;
    --input-text: rgb(226, 226, 226);
  }
}

/* Dark theme specific form styling */
.theme-dark input[type="text"],
.theme-dark input[type="search"],
.theme-dark select,
.theme-dark textarea,
.theme-auto input[type="text"],
.theme-auto input[type="search"],
.theme-auto select,
.theme-auto textarea {
  background-color: var(--input-background) !important;
  color: var(--input-text) !important;
  border-color: var(--input-border) !important;
}

/* Ensure placeholders are readable on dark backgrounds */
.theme-dark input[type="text"]::placeholder,
.theme-dark input[type="search"]::placeholder,
.theme-dark textarea::placeholder,
.theme-dark .form-control::placeholder,
.theme-auto input[type="text"]::placeholder,
.theme-auto input[type="search"]::placeholder,
.theme-auto textarea::placeholder,
.theme-auto .form-control::placeholder {
  color: rgba(226, 226, 226, 0.6) !important; /* based on --input-text */
}
/* WebKit prefix for wider Chromium coverage */
.theme-dark input[type="text"]::-webkit-input-placeholder,
.theme-dark input[type="search"]::-webkit-input-placeholder,
.theme-dark textarea::-webkit-input-placeholder,
.theme-dark .form-control::-webkit-input-placeholder,
.theme-auto input[type="text"]::-webkit-input-placeholder,
.theme-auto input[type="search"]::-webkit-input-placeholder,
.theme-auto textarea::-webkit-input-placeholder,
.theme-auto .form-control::-webkit-input-placeholder {
  color: rgba(226, 226, 226, 0.6) !important;
}

.theme-dark input[type="text"]:focus,
.theme-dark input[type="search"]:focus,
.theme-dark select:focus,
.theme-dark textarea:focus,
.theme-auto input[type="text"]:focus,
.theme-auto input[type="search"]:focus,
.theme-auto select:focus,
.theme-auto textarea:focus {
  background-color: var(--input-background) !important;
  color: var(--input-text) !important;
  border-color: #007bff !important;
  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25) !important;
}

.theme-dark .form-control,
.theme-auto .form-control {
  background-color: var(--input-background) !important;
  color: var(--input-text) !important;
  border-color: var(--input-border) !important;
}

.theme-dark .form-control:focus,
.theme-auto .form-control:focus {
  background-color: var(--input-background) !important;
  color: var(--input-text) !important;
  border-color: #007bff !important;
  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25) !important;
}

/* Dark theme specific table styling */
.theme-dark table,
.theme-auto table {
  background-color: var(--panel-color) !important;
  color: var(--card-text) !important;
}

.theme-dark table td,
.theme-auto table td {
  background-color: var(--panel-color) !important;
  color: var(--card-text) !important;
  border-color: var(--card-border) !important;
}

.theme-dark table th,
.theme-auto table th {
  background-color: var(--header-color) !important;
  color: var(--card-text) !important;
  border-color: var(--card-border) !important;
}

/* Dark theme header button styling */
.theme-dark .header-button,
.theme-auto .header-button {
  background: var(--header-color) !important;
  color: var(--card-text) !important;
  border-color: var(--card-border) !important;
}

/* Dark theme playlist mode styling */
.theme-dark .holding-tank-playlist-mode,
.theme-auto .holding-tank-playlist-mode {
  background-color: #1a3d1a !important;
  border-left-color: #28a745 !important;
}

/* Dark theme scrollbar styling */
.theme-dark ::-webkit-scrollbar,
.theme-auto ::-webkit-scrollbar {
  width: 12px;
}

.theme-dark ::-webkit-scrollbar-track,
.theme-auto ::-webkit-scrollbar-track {
  background: var(--panel-color);
}

.theme-dark ::-webkit-scrollbar-thumb,
.theme-auto ::-webkit-scrollbar-thumb {
  background: var(--card-border);
  border-radius: 6px;
}

.theme-dark ::-webkit-scrollbar-thumb:hover,
.theme-auto ::-webkit-scrollbar-thumb:hover {
  background: var(--highlight-color);
}

th {
  background-color: var(--header-color);
  color: var(--card-text);
  border: 0 !important;
}

h6,
h6 a,
.modal-title,
.close {
  color: var(--card-text);
}

.modal-body {
  background-color: var(--panel-color) !important;
  color: var(--card-text);
}

.modal-footer {
  background-color: var(--header-color);
}

/* CRITICAL: Bootstrap 5 Modal Dark Mode Fixes */
[data-bs-theme="dark"] .modal-content {
  background-color: var(--panel-color) !important;
  color: var(--card-text) !important;
  border: 1px solid var(--card-border) !important;
}

[data-bs-theme="dark"] .modal-header {
  background-color: var(--header-color) !important;
  color: var(--card-text) !important;
  border-bottom: 1px solid var(--card-border) !important;
}

[data-bs-theme="dark"] .modal-title {
  color: var(--card-text) !important;
}

[data-bs-theme="dark"] .modal-body {
  background-color: var(--panel-color) !important;
  color: var(--card-text) !important;
}

[data-bs-theme="dark"] .modal-footer {
  background-color: var(--header-color) !important;
  color: var(--card-text) !important;
  border-top: 1px solid var(--card-border) !important;
}

/* Fix all text elements in dark mode modals */
[data-bs-theme="dark"] .modal h1,
[data-bs-theme="dark"] .modal h2,
[data-bs-theme="dark"] .modal h3,
[data-bs-theme="dark"] .modal h4,
[data-bs-theme="dark"] .modal h5,
[data-bs-theme="dark"] .modal h6,
[data-bs-theme="dark"] .modal p,
[data-bs-theme="dark"] .modal span,
[data-bs-theme="dark"] .modal div,
[data-bs-theme="dark"] .modal label,
[data-bs-theme="dark"] .modal .text-muted {
  color: var(--card-text) !important;
}

/* Ensure Bootstrap close button works in dark mode */
[data-bs-theme="dark"] .btn-close {
  filter: invert(1) grayscale(100%) brightness(200%);
}

/* Bootstrap 5 Button Dark Mode Fixes */
[data-bs-theme="dark"] .btn-secondary {
  background-color: var(--header-color) !important;
  border-color: var(--card-border) !important;
  color: var(--card-text) !important;
}

[data-bs-theme="dark"] .btn-secondary:hover {
  background-color: var(--highlight-color) !important;
  border-color: var(--highlight-color) !important;
  color: var(--card-text) !important;
}

[data-bs-theme="dark"] .btn-outline-primary {
  color: var(--card-text) !important;
  border-color: var(--card-border) !important;
}

[data-bs-theme="dark"] .btn-outline-primary:hover {
  background-color: #007bff !important;
  border-color: #007bff !important;
  color: white !important;
}

/* Bootstrap 5 Form Control Dark Mode Fixes */
[data-bs-theme="dark"] .form-control {
  background-color: var(--input-background) !important;
  border-color: var(--input-border) !important;
  color: var(--input-text) !important;
}

[data-bs-theme="dark"] .form-control:focus {
  background-color: var(--input-background) !important;
  border-color: #007bff !important;
  color: var(--input-text) !important;
  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25) !important;
}

[data-bs-theme="dark"] .form-check-input {
  background-color: var(--input-background) !important;
  border-color: var(--input-border) !important;
}

[data-bs-theme="dark"] .form-check-input:checked {
  background-color: #007bff !important;
  border-color: #007bff !important;
}

/* Bootstrap 5 Badge Dark Mode Fixes */
[data-bs-theme="dark"] .badge {
  color: white !important;
}

#selected_row {
  color: white !important;
  background: linear-gradient(135deg, #007bff 0%, #0056b3 100%) !important;
  box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3) !important;
}

/* Override table cell color for selected rows */
table td#selected_row {
  color: white !important;
}

/* Also handle cases where selected_row might be on a tr */
tr#selected_row {
  color: white !important;
  background: linear-gradient(135deg, #007bff 0%, #0056b3 100%) !important;
  box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3) !important;
}

tr#selected_row td {
  color: white !important;
  background: transparent !important;
}

#player {
  background-color: var(--header-color);
}

#now_playing_bar div {
  color: var(--card-text);
}

.progress {
  background-color: #a9a9a9;
}

input[type="range"]::-webkit-slider-runnable-track {
  background: #a9a9a9;
}

.card {
  color: var(--card-text);
  border: 1px solid var(--card-border);
  background-color: var(--panel-color);
}

.card-header,
.modal-header {
  background-color: var(--header-color);
  border-bottom: 0;
}

.icon-bar a:hover,
h6 a:hover {
  color: gray;
}

table td {
  color: var(--card-text);
  border-top: 1px dotted var(--card-border) !important;
}

.nav-link {
  color: var(--card-text) !important;
  border: 0 !important;
  border-bottom: 1px solid var(--card-border) !important;
}

.nav-link.active {
  border: 1px solid var(--card-border) !important;
  border-bottom: 0 !important;
  background-color: var(--panel-color) !important;
}

.nav-item {
  background-color: var(--panel-color);
}

.dropzone {
  border-bottom: 1px dotted black !important;
}

/* Column drag and drop styles */
.column-drop-zone {
  width: 8px;
  background: transparent;
  transition: all 0.2s ease;
  cursor: col-resize;
}

.column-drop-zone:hover {
  background: var(--highlight-color);
  opacity: 0.3;
}

.column-drop-zone.drop-zone-active {
  background: var(--highlight-color);
  opacity: 0.8;
  width: 12px;
}

.column-dragging {
  opacity: 0.7;
  transform: rotate(2deg);
  transition: all 0.2s ease;
}

.column-drop-target {
  border: 2px dashed var(--highlight-color) !important;
  background-color: rgba(var(--highlight-color-rgb), 0.1) !important;
  transition: all 0.2s ease;
}

/* Visual indicator for draggable columns */
.card-header {
  cursor: grab;
  transition: all 0.2s ease;
}

.card-header:active {
  cursor: grabbing;
}

.card-header:hover {
  box-shadow: 0 0 8px rgba(var(--highlight-color-rgb), 0.3);
}



.context-menu-list {
  background: var(--context-menu-list);
  background-color: var(--context-menu-list);
}

.context-menu-item {
  background: var(--context-menu-list);
  background-color: var(--context-menu-list);
  color: var(--card-text);
}

/* New native context menu styling to match app theme */
.mxv-context-menu {
  background-color: var(--panel-color);
  color: var(--card-text);
  border: 1px solid var(--card-border);
  border-radius: 0.25rem;
  box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
  padding: 0.25rem 0;
}

.mxv-context-item {
  display: block;
  width: 100%;
  text-align: left;
  padding: 0.375rem 0.75rem;
  background: transparent;
  border: none;
  color: var(--card-text);
  cursor: pointer;
}

.mxv-context-item:hover,
.mxv-context-item:focus {
  background-color: var(--header-color);
}

.holding_tank li {
  border: 1px solid var(--holding-tank-item);
  background-color: var(--holding-tank-item);
  color: var(--card-text);
}

.hotkeys li {
  background-color: var(--panel-color);
  border-bottom: 1px dotted var(--card-border) !important;
}

.drop_target {
  color: white;
  background-color: var(--highlight-color) !important;
}

.now_playing {
  color: green;
}

.autoplaying {
  background-color: var(--panel-color);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%23237536' fill-opacity='0.4' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E");
}

.badge {
  background-color: var(--card-text);
  color: var(--inverse-card-text);
}

/* Styling for prompt boxes */

body {
  line-height: 1.5em;
  color: var(--card-text);
  background-color: var(--panel-color);
}

#container {
  align-items: center;
  justify-content: center;
  display: flex;
  height: 100%;
  overflow: auto;
}

#form {
  width: 100%;
}

#form input {
  background-color: var(--header-color);
  color: var(--card-text);
}

#label {
  font-size: 13px;
  max-width: 100%;
  max-height: 100%;
  margin-bottom: 0.8em;
  padding: 0 0.5em;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

#data {
  border-radius: 2px;
  background: white;
  color: black;
  width: 90%;
  padding: 0.4em 0.5em;
  border: 1px solid black;
  min-height: 2em;
  margin: 0 0 1.2em;
}

select#data {
  height: 2em;
}

#data-container {
  text-align: center;
}

#buttons {
  text-align: right;
  padding: 0 0.5em 0 0;
}

#buttons > button,
#buttons > input[type="submit"] {
  border-radius: 3px;
  border: 0;
  margin: 0 0 0 0.5em;
  font-size: 0.8em;
  line-height: 1em;
  padding: 0.6em 1em;
}

#ok {
  background-color: #28a745;
  color: white;
}

#cancel {
  background-color: #6c757d;
  color: white;
}
