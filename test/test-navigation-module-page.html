<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navigation Module Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .test-button:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        .result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .function-list {
            background: #e9ecef;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .function-item {
            margin: 5px 0;
            padding: 5px;
            background: white;
            border-radius: 3px;
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-available {
            background: #28a745;
        }
        .status-missing {
            background: #dc3545;
        }
        .module-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .navigation-demo {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .demo-list {
            border: 1px solid #dee2e6;
            border-radius: 4px;
            margin: 10px 0;
        }
        .demo-item {
            padding: 10px;
            border-bottom: 1px solid #dee2e6;
            cursor: pointer;
        }
        .demo-item:last-child {
            border-bottom: none;
        }
        .demo-item.selected {
            background: #007bff;
            color: white;
        }
        .demo-item:hover {
            background: #e9ecef;
        }
        .demo-item.selected:hover {
            background: #0056b3;
        }
        .keyboard-shortcuts {
            background: #e9ecef;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .shortcut {
            display: inline-block;
            background: #6c757d;
            color: white;
            padding: 2px 8px;
            border-radius: 3px;
            margin: 2px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>üß™ Navigation Module Test</h1>
    
    <div class="module-info">
        <h3>üìã Module Information</h3>
        <p><strong>Module:</strong> Navigation Module</p>
        <p><strong>Location:</strong> <code>src/renderer/modules/navigation/</code></p>
        <p><strong>Purpose:</strong> Handles all navigation functionality for moving between items and sending songs to different containers</p>
        <p><strong>Status:</strong> <span id="module-status">Testing...</span></p>
    </div>

    <div class="test-section">
        <h3>üîç Module Detection Test</h3>
        <button class="test-button" onclick="testModuleDetection()">Test Module Detection</button>
        <div id="detection-results"></div>
    </div>

    <div class="test-section">
        <h3>üìã Function Availability Test</h3>
        <button class="test-button" onclick="testFunctionAvailability()">Test Function Availability</button>
        <div id="function-results"></div>
    </div>

    <div class="test-section">
        <h3>üîß Function Testing</h3>
        <button class="test-button" onclick="testSendToHotkeys()">Test sendToHotkeys()</button>
        <button class="test-button" onclick="testSendToHoldingTank()">Test sendToHoldingTank()</button>
        <button class="test-button" onclick="testSelectNext()">Test selectNext()</button>
        <button class="test-button" onclick="testSelectPrev()">Test selectPrev()</button>
        <div id="function-test-results"></div>
    </div>

    <div class="test-section">
        <h3>üéØ Integration Test</h3>
        <button class="test-button" onclick="testModuleIntegration()">Test Module Integration</button>
        <div id="integration-results"></div>
    </div>

    <div class="test-section">
        <h3>‚å®Ô∏è Navigation Demo</h3>
        <div class="navigation-demo">
            <h4>Demo List (Use keyboard navigation)</h4>
            <div class="demo-list">
                <div class="demo-item" data-songid="song-1">Song 1 - Demo Track</div>
                <div class="demo-item" data-songid="song-2">Song 2 - Demo Track</div>
                <div class="demo-item" data-songid="song-3">Song 3 - Demo Track</div>
                <div class="demo-item" data-songid="song-4">Song 4 - Demo Track</div>
                <div class="demo-item" data-songid="song-5">Song 5 - Demo Track</div>
            </div>
            
            <div class="keyboard-shortcuts">
                <h5>Keyboard Shortcuts:</h5>
                <p><span class="shortcut">‚Üë</span> <span class="shortcut">‚Üì</span> - Navigate up/down</p>
                <p><span class="shortcut">Tab</span> - Send to hotkeys</p>
                <p><span class="shortcut">Shift+Tab</span> - Send to holding tank</p>
            </div>
            
            <div id="demo-results">
                <p>Click on an item to select it, then use keyboard shortcuts to test navigation.</p>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h3>üìä Test Summary</h3>
        <button class="test-button" onclick="runAllTests()">Run All Tests</button>
        <div id="summary-results"></div>
    </div>

    <script type="module">
        // Import the navigation module
        import navigationModule from './renderer/modules/navigation/index.js';

        // Make module available globally for testing
        window.navigationModule = navigationModule;

        // Test functions
        window.testModuleDetection = function() {
            const results = document.getElementById('detection-results');
            results.innerHTML = '';

            try {
                if (window.navigationModule) {
                    results.innerHTML += '<div class="result success">‚úÖ Navigation Module detected successfully</div>';
                    results.innerHTML += '<div class="result info">Module object: ' + typeof window.navigationModule + '</div>';
                } else {
                    results.innerHTML += '<div class="result error">‚ùå Navigation Module not detected</div>';
                }
            } catch (error) {
                results.innerHTML += '<div class="result error">‚ùå Error detecting module: ' + error.message + '</div>';
            }
        };

        window.testFunctionAvailability = function() {
            const results = document.getElementById('function-results');
            results.innerHTML = '';

            const functions = [
                'sendToHotkeys',
                'sendToHoldingTank', 
                'selectNext',
                'selectPrev',
                'initializeNavigation',
                'getNavigationFunctions'
            ];

            let availableCount = 0;
            let totalCount = functions.length;

            results.innerHTML += '<div class="function-list">';
            functions.forEach(funcName => {
                const isAvailable = typeof window.navigationModule[funcName] === 'function';
                const statusClass = isAvailable ? 'status-available' : 'status-missing';
                const statusText = isAvailable ? 'Available' : 'Missing';
                
                results.innerHTML += `
                    <div class="function-item">
                        <span class="status-indicator ${statusClass}"></span>
                        <strong>${funcName}():</strong> ${statusText}
                    </div>
                `;
                
                if (isAvailable) availableCount++;
            });
            results.innerHTML += '</div>';

            results.innerHTML += `<div class="result ${availableCount === totalCount ? 'success' : 'error'}">
                ${availableCount}/${totalCount} functions available
            </div>`;
        };

        window.testSendToHotkeys = function() {
            const results = document.getElementById('function-test-results');
            results.innerHTML = '';

            try {
                if (typeof window.navigationModule.sendToHotkeys === 'function') {
                    results.innerHTML += '<div class="result success">‚úÖ sendToHotkeys function is available</div>';
                    results.innerHTML += '<div class="result info">Function signature: sendToHotkeys()</div>';
                } else {
                    results.innerHTML += '<div class="result error">‚ùå sendToHotkeys function is not available</div>';
                }
            } catch (error) {
                results.innerHTML += '<div class="result error">‚ùå Error testing sendToHotkeys: ' + error.message + '</div>';
            }
        };

        window.testSendToHoldingTank = function() {
            const results = document.getElementById('function-test-results');
            results.innerHTML = '';

            try {
                if (typeof window.navigationModule.sendToHoldingTank === 'function') {
                    results.innerHTML += '<div class="result success">‚úÖ sendToHoldingTank function is available</div>';
                    results.innerHTML += '<div class="result info">Function signature: sendToHoldingTank()</div>';
                } else {
                    results.innerHTML += '<div class="result error">‚ùå sendToHoldingTank function is not available</div>';
                }
            } catch (error) {
                results.innerHTML += '<div class="result error">‚ùå Error testing sendToHoldingTank: ' + error.message + '</div>';
            }
        };

        window.testSelectNext = function() {
            const results = document.getElementById('function-test-results');
            results.innerHTML = '';

            try {
                if (typeof window.navigationModule.selectNext === 'function') {
                    results.innerHTML += '<div class="result success">‚úÖ selectNext function is available</div>';
                    results.innerHTML += '<div class="result info">Function signature: selectNext()</div>';
                } else {
                    results.innerHTML += '<div class="result error">‚ùå selectNext function is not available</div>';
                }
            } catch (error) {
                results.innerHTML += '<div class="result error">‚ùå Error testing selectNext: ' + error.message + '</div>';
            }
        };

        window.testSelectPrev = function() {
            const results = document.getElementById('function-test-results');
            results.innerHTML = '';

            try {
                if (typeof window.navigationModule.selectPrev === 'function') {
                    results.innerHTML += '<div class="result success">‚úÖ selectPrev function is available</div>';
                    results.innerHTML += '<div class="result info">Function signature: selectPrev()</div>';
                } else {
                    results.innerHTML += '<div class="result error">‚ùå selectPrev function is not available</div>';
                }
            } catch (error) {
                results.innerHTML += '<div class="result error">‚ùå Error testing selectPrev: ' + error.message + '</div>';
            }
        };

        window.testModuleIntegration = function() {
            const results = document.getElementById('integration-results');
            results.innerHTML = '';

            try {
                // Test initialization
                if (typeof window.navigationModule.initializeNavigation === 'function') {
                    results.innerHTML += '<div class="result success">‚úÖ initializeNavigation function is available</div>';
                } else {
                    results.innerHTML += '<div class="result error">‚ùå initializeNavigation function is not available</div>';
                }

                // Test getNavigationFunctions
                if (typeof window.navigationModule.getNavigationFunctions === 'function') {
                    results.innerHTML += '<div class="result success">‚úÖ getNavigationFunctions function is available</div>';
                    
                    const functions = window.navigationModule.getNavigationFunctions();
                    if (functions && typeof functions === 'object') {
                        results.innerHTML += '<div class="result success">‚úÖ getNavigationFunctions returns valid object</div>';
                        results.innerHTML += '<div class="result info">Available functions: ' + Object.keys(functions).join(', ') + '</div>';
                    } else {
                        results.innerHTML += '<div class="result error">‚ùå getNavigationFunctions does not return valid object</div>';
                    }
                } else {
                    results.innerHTML += '<div class="result error">‚ùå getNavigationFunctions function is not available</div>';
                }

            } catch (error) {
                results.innerHTML += '<div class="result error">‚ùå Error testing module integration: ' + error.message + '</div>';
            }
        };

        window.runAllTests = function() {
            const results = document.getElementById('summary-results');
            results.innerHTML = '';

            // Run all tests
            testModuleDetection();
            setTimeout(() => {
                testFunctionAvailability();
                setTimeout(() => {
                    testModuleIntegration();
                    setTimeout(() => {
                        // Summary
                        results.innerHTML += '<div class="result info">üéØ All tests completed. Check individual test results above.</div>';
                        results.innerHTML += '<div class="result success">‚úÖ Navigation Module extraction appears successful!</div>';
                    }, 100);
                }, 100);
            }, 100);
        };

        // Setup demo navigation functionality
        function setupDemoNavigation() {
            const demoItems = document.querySelectorAll('.demo-item');
            let selectedIndex = 0;

            // Select first item by default
            demoItems[0].classList.add('selected');

            // Click to select
            demoItems.forEach((item, index) => {
                item.addEventListener('click', function() {
                    demoItems.forEach(i => i.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedIndex = index;
                    updateDemoResults('Item selected: ' + this.textContent);
                });
            });

            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    demoItems[selectedIndex].classList.remove('selected');
                    selectedIndex = (selectedIndex + 1) % demoItems.length;
                    demoItems[selectedIndex].classList.add('selected');
                    updateDemoResults('Navigated down to: ' + demoItems[selectedIndex].textContent);
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    demoItems[selectedIndex].classList.remove('selected');
                    selectedIndex = (selectedIndex - 1 + demoItems.length) % demoItems.length;
                    demoItems[selectedIndex].classList.add('selected');
                    updateDemoResults('Navigated up to: ' + demoItems[selectedIndex].textContent);
                } else if (e.key === 'Tab') {
                    e.preventDefault();
                    if (e.shiftKey) {
                        updateDemoResults('Shift+Tab pressed - would send to holding tank');
                    } else {
                        updateDemoResults('Tab pressed - would send to hotkeys');
                    }
                }
            });
        }

        function updateDemoResults(message) {
            const results = document.getElementById('demo-results');
            results.innerHTML = '<p><strong>Action:</strong> ' + message + '</p>';
        }

        // Auto-run module detection on load
        window.addEventListener('load', function() {
            document.getElementById('module-status').textContent = 'Ready for testing';
            testModuleDetection();
            setupDemoNavigation();
        });
    </script>
</body>
</html> 